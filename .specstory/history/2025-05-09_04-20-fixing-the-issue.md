<!-- Generated by SpecStory -->

# Fixing the Issue (2025-05-09 09:20:26)

_**User**_

fix it

---

_**Assistant**_



---

Looking at the error message, there's a mismatch between your code and database schema. The code is trying to access a column called `user.enable_notification` but your database only has `ntf_enabled`.

Let me modify your NextAuth configuration to address this issue:

---

```diff
          session.user.ntf_topics = user?.ntf_topics || null;
          session.user.ntf_enabled = user?.ntf_enabled || false;
+         session.user.enable_notification = user?.ntf_enabled || false;
          session.user.ntf_token_created_at = user?.ntf_token_created_at || null;
        }
```

---

I've added a compatibility mapping in the session callback. The code is now using both field names:
- `ntf_enabled`: The actual field name in your database
- `enable_notification`: Used by some part of your app that caused the error

This solution maintains backward compatibility without requiring database schema changes. The session object now contains both properties with the same value from the `ntf_enabled` field.

---

